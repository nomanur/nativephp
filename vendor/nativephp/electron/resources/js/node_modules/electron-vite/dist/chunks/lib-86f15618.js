'use strict';

var vite = require('vite');
var config = require('./lib-3592fc5a.js');
require('node:path');
require('node:fs');
require('node:url');
require('node:module');
require('picocolors');
require('esbuild');
require('node:child_process');
require('node:fs/promises');
require('magic-string');
require('node:crypto');

/**
 * Bundles the electron app for production.
 */
async function build(inlineConfig = {}) {
    var _a, _b, _c, _d, _e, _f;
    process.env.NODE_ENV_ELECTRON_VITE = 'production';
    const config$1 = await config.resolveConfig(inlineConfig, 'build', 'production');
    if (config$1.config) {
        const mainViteConfig = (_a = config$1.config) === null || _a === void 0 ? void 0 : _a.main;
        if (mainViteConfig) {
            if ((_b = mainViteConfig.build) === null || _b === void 0 ? void 0 : _b.watch) {
                mainViteConfig.build.watch = null;
            }
            await vite.build(mainViteConfig);
        }
        const preloadViteConfig = (_c = config$1.config) === null || _c === void 0 ? void 0 : _c.preload;
        if (preloadViteConfig) {
            if ((_d = preloadViteConfig.build) === null || _d === void 0 ? void 0 : _d.watch) {
                preloadViteConfig.build.watch = null;
            }
            await vite.build(preloadViteConfig);
        }
        const rendererViteConfig = (_e = config$1.config) === null || _e === void 0 ? void 0 : _e.renderer;
        if (rendererViteConfig) {
            if ((_f = rendererViteConfig.build) === null || _f === void 0 ? void 0 : _f.watch) {
                rendererViteConfig.build.watch = null;
            }
            await vite.build(rendererViteConfig);
        }
    }
}

exports.build = build;
